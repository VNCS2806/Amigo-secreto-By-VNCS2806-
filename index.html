<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÑ Amigo Secreto ‚Äì Cartas Bloqueio por Nome</title>
<meta name="description" content="Jogo online de amigo secreto com cartas, bloqueio por nome e admin que v√™ todos os sorteios.">
<style>
body { margin:0; font-family:Arial,sans-serif; background:radial-gradient(circle,#0b3d2e,#021a12); color:#fff; text-align:center; }
.box { max-width:500px; margin:40px auto; background:rgba(0,0,0,0.35); padding:25px; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,0.6);}
input, button { width:100%; padding:14px; margin-top:12px; border-radius:8px; border:none; font-size:16px;}
button { background:#b30000; color:white; cursor:pointer;}
button:active{background:#8f0000;}
.hidden{display:none;}
.grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(80px,1fr)); gap:15px; justify-items:center; margin-top:20px;}
.card{width:80px;height:120px;background:linear-gradient(135deg,#b30000,#6d0000);border-radius:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:32px;color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.4);transition:transform .3s,box-shadow .3s;}
.card:hover{transform:scale(1.08);box-shadow:0 10px 20px rgba(0,0,0,.6);}
ul{text-align:left;}
</style>
</head>
<body>

<div class="box" id="loginBox">
<h2>üéÑ Amigo Secreto</h2>
<p>Digite seu nome</p>
<input id="nomeInput" placeholder="Ex: Vini">
<button id="btnEntrar">Entrar</button>
</div>

<div class="box hidden" id="cartasBox">
<h2>Escolha uma carta</h2>
<div class="grid" id="cartasGrid"></div>
</div>

<div class="box hidden" id="resultadoBox">
<h2>üéÅ Seu amigo secreto √©:</h2>
<h1 id="resultado"></h1>
</div>

<div class="box hidden" id="adminBox">
<h2>üîê ADMIN</h2>
<button id="btnReset">Resetar evento</button>
<h3>Status do sorteio</h3>
<ul id="lista"></ul>
</div>

<script>
const NOMES = ['Alan','Dani','Vini','Alani','Vanda','Geraldo','Lourdes','Andr√©','V√¢nia','C√°ssia','Anderson','Liz'];
const ADMIN = 'viniciusadm';
let usuarios = JSON.parse(localStorage.getItem('usuarios')) || {}; // persiste entre reloads
let nomeAtual = '';

function normalizar(txt){ return txt.trim().toLowerCase(); }

function entrar() {
    const input = document.getElementById('nomeInput');
    const nomeDigitado = normalizar(input.value);
    if(!nomeDigitado){ alert('Digite seu nome'); return; }

    // ADMIN
    if(nomeDigitado === ADMIN){
        document.getElementById('loginBox').classList.add('hidden');
        document.getElementById('adminBox').classList.remove('hidden');
        atualizarAdmin();
        return;
    }

    const nomeOficial = NOMES.find(n=>normalizar(n)===nomeDigitado);
    if(!nomeOficial){ alert('Nome n√£o reconhecido'); return; }

    // bloqueio por nome
    if(usuarios[nomeOficial]){ alert('Esse nome j√° sorteou.'); return; }

    nomeAtual = nomeOficial;
    mostrarCartas();
}

function mostrarCartas(){
    const grid = document.getElementById('cartasGrid');
    grid.innerHTML='';
    let opcoes = NOMES.filter(n=>n!==nomeAtual && !Object.values(usuarios).includes(n));
    opcoes.forEach(()=>{ // quantidade de cartas = n√∫mero de op√ß√µes
        const card = document.createElement('div');
        card.className='card';
        card.innerText='üé¥';
        card.onclick=()=>abrirCarta(card,opcoes);
        grid.appendChild(card);
    });
    document.getElementById('loginBox').classList.add('hidden');
    document.getElementById('cartasBox').classList.remove('hidden');
}

function abrirCarta(card,opcoes){
    const sorteado = opcoes[Math.floor(Math.random()*opcoes.length)];
    usuarios[nomeAtual] = sorteado;
    localStorage.setItem('usuarios', JSON.stringify(usuarios));
    document.getElementById('cartasBox').classList.add('hidden');
    document.getElementById('resultadoBox').classList.remove('hidden');
    document.getElementById('resultado').innerText = sorteado;
    atualizarAdmin();
}

function atualizarAdmin(){
    const lista = document.getElementById('lista');
    lista.innerHTML='';
    if(Object.keys(usuarios).length===0){ lista.innerHTML='<li>Ningu√©m sorteou ainda</li>'; return; }
    for(let [nome,tirou] of Object.entries(usuarios)){
        lista.innerHTML+=`<li>${nome} ‚ûú ${tirou}</li>`;
    }
}

function resetar(){
    if(!confirm('Resetar TODO o evento?')) return;
    usuarios={};
    localStorage.removeItem('usuarios');
    document.getElementById('resultadoBox').classList.add('hidden');
    document.getElementById('cartasBox').classList.add('hidden');
    document.getElementById('loginBox').classList.remove('hidden');
    atualizarAdmin();
    alert('Evento resetado');
}

document.getElementById('btnEntrar').addEventListener('click', entrar);
document.getElementById('btnEntrar').addEventListener('touchend', e=>{e.preventDefault(); entrar();},{passive:false});
document.getElementById('btnReset').addEventListener('click', resetar);

</script>

</body>
</html>
